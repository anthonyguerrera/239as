{"payload":{"allShortcutsEnabled":false,"fileTree":{"":{"items":[{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"},{"name":"module.py","path":"module.py","contentType":"file"},{"name":"plain.py","path":"plain.py","contentType":"file"},{"name":"requirements.txt","path":"requirements.txt","contentType":"file"}],"totalCount":5}},"fileTreeProcessingTime":4.080061000000001,"foldersToFetch":[],"repo":{"id":228202731,"defaultBranch":"master","name":"FilterResponseNormalizationTensorflow","ownerLogin":"SdahlSean","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2019-12-15T15:03:22.000Z","ownerAvatar":"https://avatars.githubusercontent.com/u/48972266?v=4","public":true,"private":false,"isOrgOwned":false},"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"master","listCacheKey":"v0:1676501994.495253","canEdit":false,"refType":"branch","currentOid":"053eb364e72cc97505e55411d6a8d992c35aeed7"},"path":"module.py","currentUser":null,"blob":{"rawLines":["import tensorflow as tf","import tensorflow.keras as k","","","class FRN(k.layers.Layer):","    \"\"\"","        class to be used as a tf.keras.layers.Layer for a tf.keras.models.Sequential / tf.keras.models.Model model","","        implements a filter response normalization layer (as described in https://arxiv.org/abs/1911.09737)","        used in convolutional neural networks (input shape should be 4 dimensional)","","        ...","","        Attributes","        ----------","        eps : float","            small number to prevent numerical instability","","        Methods","        -------","        build","            called when model.build is called","        call","            used in forward pass, computes output of layer","    \"\"\"","    def __init__(self, eps=1e-6):","        \"\"\"","            initializes the layer hyper parameters","            called when layer is added to model","","            Variables","            ----------","            eps : float","                small number to prevent numerical instability","        \"\"\"","        super(FRN, self).__init__()","        self.eps = eps  # parameter to prevent numerical instability (division by 0)","","    def build(self, input_shape):","        \"\"\"","            initializes layers trainable parameters when model is built","        \"\"\"","        # all parameters of shape (1, 1, 1, #filters)","        self.beta = self.add_variable('beta', shape=(1, 1, 1, input_shape[3]))","        self.gamma = self.add_variable('gamma', shape=(1, 1, 1, input_shape[3]))","        self.tau = self.add_variable('tau', shape=(1, 1, 1, input_shape[3]))","","    def call(self, x):","        \"\"\"","            computes output of layer in forward pass of model","        \"\"\"","        # transform inputs","        v2 = tf.math.reduce_mean(x, (1, 2), True)  # square mean of each filter","        xhat = x/tf.math.sqrt(v2 + self.eps)  # divide input filter by respective means","        y = self.gamma * xhat + self.beta  # scale and shift the filter activations","        z = tf.math.maximum(y, self.tau)  # apply ReLU like activation (with shifted minimum)","        return z"],"stylingDirectives":[[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":17,"cssClass":"pl-s1"},{"start":18,"end":20,"cssClass":"pl-k"},{"start":21,"end":23,"cssClass":"pl-s1"}],[{"start":0,"end":6,"cssClass":"pl-k"},{"start":7,"end":17,"cssClass":"pl-s1"},{"start":18,"end":23,"cssClass":"pl-s1"},{"start":24,"end":26,"cssClass":"pl-k"},{"start":27,"end":28,"cssClass":"pl-s1"}],[],[],[{"start":0,"end":5,"cssClass":"pl-k"},{"start":6,"end":9,"cssClass":"pl-v"},{"start":10,"end":11,"cssClass":"pl-s1"},{"start":12,"end":18,"cssClass":"pl-s1"},{"start":19,"end":24,"cssClass":"pl-v"}],[{"start":4,"end":7,"cssClass":"pl-s"}],[{"start":0,"end":114,"cssClass":"pl-s"}],[{"start":0,"end":0,"cssClass":"pl-s"}],[{"start":0,"end":107,"cssClass":"pl-s"}],[{"start":0,"end":83,"cssClass":"pl-s"}],[{"start":0,"end":0,"cssClass":"pl-s"}],[{"start":0,"end":11,"cssClass":"pl-s"}],[{"start":0,"end":0,"cssClass":"pl-s"}],[{"start":0,"end":18,"cssClass":"pl-s"}],[{"start":0,"end":18,"cssClass":"pl-s"}],[{"start":0,"end":19,"cssClass":"pl-s"}],[{"start":0,"end":57,"cssClass":"pl-s"}],[{"start":0,"end":0,"cssClass":"pl-s"}],[{"start":0,"end":15,"cssClass":"pl-s"}],[{"start":0,"end":15,"cssClass":"pl-s"}],[{"start":0,"end":13,"cssClass":"pl-s"}],[{"start":0,"end":45,"cssClass":"pl-s"}],[{"start":0,"end":12,"cssClass":"pl-s"}],[{"start":0,"end":58,"cssClass":"pl-s"}],[{"start":0,"end":7,"cssClass":"pl-s"}],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":16,"cssClass":"pl-en"},{"start":17,"end":21,"cssClass":"pl-s1"},{"start":23,"end":26,"cssClass":"pl-s1"},{"start":26,"end":27,"cssClass":"pl-c1"},{"start":27,"end":31,"cssClass":"pl-c1"}],[{"start":8,"end":11,"cssClass":"pl-s"}],[{"start":0,"end":50,"cssClass":"pl-s"}],[{"start":0,"end":47,"cssClass":"pl-s"}],[{"start":0,"end":0,"cssClass":"pl-s"}],[{"start":0,"end":21,"cssClass":"pl-s"}],[{"start":0,"end":22,"cssClass":"pl-s"}],[{"start":0,"end":23,"cssClass":"pl-s"}],[{"start":0,"end":61,"cssClass":"pl-s"}],[{"start":0,"end":11,"cssClass":"pl-s"}],[{"start":8,"end":13,"cssClass":"pl-en"},{"start":14,"end":17,"cssClass":"pl-v"},{"start":19,"end":23,"cssClass":"pl-s1"},{"start":25,"end":33,"cssClass":"pl-en"}],[{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":16,"cssClass":"pl-s1"},{"start":17,"end":18,"cssClass":"pl-c1"},{"start":19,"end":22,"cssClass":"pl-s1"},{"start":24,"end":84,"cssClass":"pl-c"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":13,"cssClass":"pl-en"},{"start":14,"end":18,"cssClass":"pl-s1"},{"start":20,"end":31,"cssClass":"pl-s1"}],[{"start":8,"end":11,"cssClass":"pl-s"}],[{"start":0,"end":71,"cssClass":"pl-s"}],[{"start":0,"end":11,"cssClass":"pl-s"}],[{"start":8,"end":53,"cssClass":"pl-c"}],[{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":18,"end":19,"cssClass":"pl-c1"},{"start":20,"end":24,"cssClass":"pl-s1"},{"start":25,"end":37,"cssClass":"pl-en"},{"start":38,"end":44,"cssClass":"pl-s"},{"start":46,"end":51,"cssClass":"pl-s1"},{"start":51,"end":52,"cssClass":"pl-c1"},{"start":53,"end":54,"cssClass":"pl-c1"},{"start":56,"end":57,"cssClass":"pl-c1"},{"start":59,"end":60,"cssClass":"pl-c1"},{"start":62,"end":73,"cssClass":"pl-s1"},{"start":74,"end":75,"cssClass":"pl-c1"}],[{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":18,"cssClass":"pl-s1"},{"start":19,"end":20,"cssClass":"pl-c1"},{"start":21,"end":25,"cssClass":"pl-s1"},{"start":26,"end":38,"cssClass":"pl-en"},{"start":39,"end":46,"cssClass":"pl-s"},{"start":48,"end":53,"cssClass":"pl-s1"},{"start":53,"end":54,"cssClass":"pl-c1"},{"start":55,"end":56,"cssClass":"pl-c1"},{"start":58,"end":59,"cssClass":"pl-c1"},{"start":61,"end":62,"cssClass":"pl-c1"},{"start":64,"end":75,"cssClass":"pl-s1"},{"start":76,"end":77,"cssClass":"pl-c1"}],[{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":16,"cssClass":"pl-s1"},{"start":17,"end":18,"cssClass":"pl-c1"},{"start":19,"end":23,"cssClass":"pl-s1"},{"start":24,"end":36,"cssClass":"pl-en"},{"start":37,"end":42,"cssClass":"pl-s"},{"start":44,"end":49,"cssClass":"pl-s1"},{"start":49,"end":50,"cssClass":"pl-c1"},{"start":51,"end":52,"cssClass":"pl-c1"},{"start":54,"end":55,"cssClass":"pl-c1"},{"start":57,"end":58,"cssClass":"pl-c1"},{"start":60,"end":71,"cssClass":"pl-s1"},{"start":72,"end":73,"cssClass":"pl-c1"}],[],[{"start":4,"end":7,"cssClass":"pl-k"},{"start":8,"end":12,"cssClass":"pl-en"},{"start":13,"end":17,"cssClass":"pl-s1"},{"start":19,"end":20,"cssClass":"pl-s1"}],[{"start":8,"end":11,"cssClass":"pl-s"}],[{"start":0,"end":61,"cssClass":"pl-s"}],[{"start":0,"end":11,"cssClass":"pl-s"}],[{"start":8,"end":26,"cssClass":"pl-c"}],[{"start":8,"end":10,"cssClass":"pl-s1"},{"start":11,"end":12,"cssClass":"pl-c1"},{"start":13,"end":15,"cssClass":"pl-s1"},{"start":16,"end":20,"cssClass":"pl-s1"},{"start":21,"end":32,"cssClass":"pl-en"},{"start":33,"end":34,"cssClass":"pl-s1"},{"start":37,"end":38,"cssClass":"pl-c1"},{"start":40,"end":41,"cssClass":"pl-c1"},{"start":44,"end":48,"cssClass":"pl-c1"},{"start":51,"end":79,"cssClass":"pl-c"}],[{"start":8,"end":12,"cssClass":"pl-s1"},{"start":13,"end":14,"cssClass":"pl-c1"},{"start":15,"end":16,"cssClass":"pl-s1"},{"start":16,"end":17,"cssClass":"pl-c1"},{"start":17,"end":19,"cssClass":"pl-s1"},{"start":20,"end":24,"cssClass":"pl-s1"},{"start":25,"end":29,"cssClass":"pl-en"},{"start":30,"end":32,"cssClass":"pl-s1"},{"start":33,"end":34,"cssClass":"pl-c1"},{"start":35,"end":39,"cssClass":"pl-s1"},{"start":40,"end":43,"cssClass":"pl-s1"},{"start":46,"end":87,"cssClass":"pl-c"}],[{"start":8,"end":9,"cssClass":"pl-s1"},{"start":10,"end":11,"cssClass":"pl-c1"},{"start":12,"end":16,"cssClass":"pl-s1"},{"start":17,"end":22,"cssClass":"pl-s1"},{"start":23,"end":24,"cssClass":"pl-c1"},{"start":25,"end":29,"cssClass":"pl-s1"},{"start":30,"end":31,"cssClass":"pl-c1"},{"start":32,"end":36,"cssClass":"pl-s1"},{"start":37,"end":41,"cssClass":"pl-s1"},{"start":43,"end":83,"cssClass":"pl-c"}],[{"start":8,"end":9,"cssClass":"pl-s1"},{"start":10,"end":11,"cssClass":"pl-c1"},{"start":12,"end":14,"cssClass":"pl-s1"},{"start":15,"end":19,"cssClass":"pl-s1"},{"start":20,"end":27,"cssClass":"pl-en"},{"start":28,"end":29,"cssClass":"pl-s1"},{"start":31,"end":35,"cssClass":"pl-s1"},{"start":36,"end":39,"cssClass":"pl-s1"},{"start":42,"end":93,"cssClass":"pl-c"}],[{"start":8,"end":14,"cssClass":"pl-k"},{"start":15,"end":16,"cssClass":"pl-s1"}]],"colorizedLines":null,"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/SdahlSean/FilterResponseNormalizationTensorflow/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":null},"displayName":"module.py","displayUrl":"https://github.com/SdahlSean/FilterResponseNormalizationTensorflow/blob/master/module.py?raw=true","headerInfo":{"blobSize":"1.99 KB","deleteTooltip":"You must be signed in to make or propose changes","editTooltip":"You must be signed in to make or propose changes","ghDesktopPath":"https://desktop.github.com","isGitLfs":false,"onBranch":true,"shortPath":"62307e8","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2FSdahlSean%2FFilterResponseNormalizationTensorflow%2Fblob%2Fmaster%2Fmodule.py","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"57","truncatedSloc":"48"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplate":null,"discussionTemplate":null,"language":"Python","languageID":303,"large":false,"planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/SdahlSean/FilterResponseNormalizationTensorflow/blob/master/module.py","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","releasePath":"/SdahlSean/FilterResponseNormalizationTensorflow/releases/new?marketplace=true","showPublishActionBanner":false},"rawBlobUrl":"https://github.com/SdahlSean/FilterResponseNormalizationTensorflow/raw/master/module.py","renderImageOrRaw":false,"richText":null,"renderedFileInfo":null,"shortPath":null,"symbolsEnabled":true,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timed_out":false,"not_analyzed":false,"symbols":[{"name":"FRN","kind":"class","ident_start":61,"ident_end":64,"extent_start":55,"extent_end":2032,"fully_qualified_name":"FRN","ident_utf16":{"start":{"line_number":4,"utf16_col":6},"end":{"line_number":4,"utf16_col":9}},"extent_utf16":{"start":{"line_number":4,"utf16_col":0},"end":{"line_number":56,"utf16_col":16}}},{"name":"__init__","kind":"function","ident_start":709,"ident_end":717,"extent_start":705,"extent_end":1110,"fully_qualified_name":"FRN.__init__","ident_utf16":{"start":{"line_number":25,"utf16_col":8},"end":{"line_number":25,"utf16_col":16}},"extent_utf16":{"start":{"line_number":25,"utf16_col":4},"end":{"line_number":36,"utf16_col":84}}},{"name":"build","kind":"function","ident_start":1120,"ident_end":1125,"extent_start":1116,"extent_end":1532,"fully_qualified_name":"FRN.build","ident_utf16":{"start":{"line_number":38,"utf16_col":8},"end":{"line_number":38,"utf16_col":13}},"extent_utf16":{"start":{"line_number":38,"utf16_col":4},"end":{"line_number":45,"utf16_col":76}}},{"name":"call","kind":"function","ident_start":1542,"ident_end":1546,"extent_start":1538,"extent_end":2032,"fully_qualified_name":"FRN.call","ident_utf16":{"start":{"line_number":47,"utf16_col":8},"end":{"line_number":47,"utf16_col":12}},"extent_utf16":{"start":{"line_number":47,"utf16_col":4},"end":{"line_number":56,"utf16_col":16}}}]}},"copilotInfo":null,"copilotAccessAllowed":false,"csrf_tokens":{"/SdahlSean/FilterResponseNormalizationTensorflow/branches":{"post":"v3BLcqgIpJ8qYHSsBYzCiVezZkOyE6am1BcESVvsL3nPsibax5_n5-yrOhN6fhOVXb-NB0xwl3520pIzydAqjQ"},"/repos/preferences":{"post":"1-f5dDiYF_1UOzV4RI0uAj9fglQR_PyooTrDTFxq4kj9rWWdV4NlPTuRcS24taFTd6nr1DSOK31xvb65o3a5_g"}}},"title":"FilterResponseNormalizationTensorflow/module.py at master Â· SdahlSean/FilterResponseNormalizationTensorflow"}